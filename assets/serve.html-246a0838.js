import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as n,e as i}from"./app-8c5ce49e.js";const s={},d=i(`<h1 id="服务器笔记" tabindex="-1"><a class="header-anchor" href="#服务器笔记" aria-hidden="true">#</a> 服务器笔记</h1><h2 id="linux操作" tabindex="-1"><a class="header-anchor" href="#linux操作" aria-hidden="true">#</a> Linux操作</h2><h3 id="环境" tabindex="-1"><a class="header-anchor" href="#环境" aria-hidden="true">#</a> 环境</h3><p>ubuntu apache2</p><h3 id="网页文件位置" tabindex="-1"><a class="header-anchor" href="#网页文件位置" aria-hidden="true">#</a> 网页文件位置：</h3><p>/var/www/html</p><h3 id="php配置文件位置" tabindex="-1"><a class="header-anchor" href="#php配置文件位置" aria-hidden="true">#</a> php配置文件位置</h3><p>/etc/php/7.2/apache/php.ini</p><h3 id="ubuntu-apache-配置文件位置" tabindex="-1"><a class="header-anchor" href="#ubuntu-apache-配置文件位置" aria-hidden="true">#</a> ubuntu apache 配置文件位置</h3><p>/etc/apache2/apache2.conf</p><h3 id="ubuntu-apache-错误日志位置" tabindex="-1"><a class="header-anchor" href="#ubuntu-apache-错误日志位置" aria-hidden="true">#</a> ubuntu apache 错误日志位置</h3><p>/var/log/apache2/error.log</p><h3 id="安装php扩展" tabindex="-1"><a class="header-anchor" href="#安装php扩展" aria-hidden="true">#</a> 安装php扩展</h3><p>sudo apt-get install php-(扩展名) 并在php.ini中取消相应注释</p><h3 id="重启apache" tabindex="-1"><a class="header-anchor" href="#重启apache" aria-hidden="true">#</a> 重启apache</h3><p>sudo systemctl restart apache2</p><h2 id="vim" tabindex="-1"><a class="header-anchor" href="#vim" aria-hidden="true">#</a> vim</h2><h3 id="q" tabindex="-1"><a class="header-anchor" href="#q" aria-hidden="true">#</a> :q(!)</h3><p>退出,后面加感叹后为强制退出(用于读取readonly文件时)</p><h3 id="w" tabindex="-1"><a class="header-anchor" href="#w" aria-hidden="true">#</a> :w</h3><p>保存，与q配合</p><h3 id="i" tabindex="-1"><a class="header-anchor" href="#i" aria-hidden="true">#</a> i</h3><p>插入</p><h3 id="搜索词" tabindex="-1"><a class="header-anchor" href="#搜索词" aria-hidden="true">#</a> /(搜索词)</h3><p>搜索，回车后执行</p><h3 id="n" tabindex="-1"><a class="header-anchor" href="#n" aria-hidden="true">#</a> n</h3><p>重复上次搜索</p><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> mysql</h2><h3 id="开启mysql外部访问" tabindex="-1"><a class="header-anchor" href="#开启mysql外部访问" aria-hidden="true">#</a> 开启mysql外部访问</h3><ol><li>给予账户外部访问权限</li><li>修改/etc/mysql/my.cnf文件中bind-address，将bind-address者注释掉</li><li>开放云服务器3306端口访问限制</li></ol><h3 id="error-adding-symbols-dso-missing-from-command-line" tabindex="-1"><a class="header-anchor" href="#error-adding-symbols-dso-missing-from-command-line" aria-hidden="true">#</a> error adding symbols: DSO missing from command line</h3><p>在L 与 l 之间添加 -Wl,--copy-dt-needed-entries</p><h2 id="配置fcgi" tabindex="-1"><a class="header-anchor" href="#配置fcgi" aria-hidden="true">#</a> 配置fcgi</h2><ol><li>安装fcgi库 <ol><li>打开fcgi官方网站并下载 https://fastcgi-archives.github.io/</li><li>解压源码 (安装库的一般步骤)</li><li>chmod +rwx ./configure (给配置程序执行权限)</li><li>sudo make</li><li>sudo make install (安装库到C/C++公共库中, 必须要sudo)</li><li>sudo ldconfig (刷新公共库信息, 必须要sudo)</li></ol></li><li>配置apache <ol><li>安装fcgi模块 sudo apt-get install libapache2-mod-fcgid</li><li>在 /etc/apache2/apache2.conf 中给予文件夹fcgi-bin执行的权限</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;Directory &quot;/var/www/html/fcgi-bin&quot;&gt;
AllowOverride None
# 执行CGI
Options Indexes ExecCGI  
Order allow,deny
Allow from all
&lt;/Directory&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>修改fcgi关联应在 /etc/apache2/mods-enabled/fcgid.conf 中操作</li><li>重启apache</li></ol></li><li>测试 <ol><li>测试编译examples中的echo.c与echo-cpp.cpp</li><li>将编译结果移至/var/www/html/fcgi-bin, 访问/fcgi-bin/echo.fcgi</li></ol></li><li>编译说明 <ol><li>通用 生成的可执行文件必须以.fcgi结尾</li><li>C 需要编译选项 -lfcgi</li><li>C++ 需要编译选项 -Wl,--copy-dt-needed-entries -lfcgi++</li><li>CMAKE 的情况w</li></ol></li></ol><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">add_executable</span><span class="token punctuation">(</span>main.fcgi main.cpp<span class="token punctuation">)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_FLAGS</span> -Wl,--copy-dt-needed-entries<span class="token punctuation">)</span>

<span class="token function">TARGET_LINK_LIBRARIES</span><span class="token punctuation">(</span>main.fcgi fcgi++<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>其他说明 <ol><li>设置 FcgidMaxRequestLen 2,097,152(2M) 调整post的大小</li></ol></li></ol><h2 id="配置-mysql-connector" tabindex="-1"><a class="header-anchor" href="#配置-mysql-connector" aria-hidden="true">#</a> 配置 mysql connector</h2><h3 id="安装前置" tabindex="-1"><a class="header-anchor" href="#安装前置" aria-hidden="true">#</a> 安装前置</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#安装mysql的c api</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libmysqlclient-dev
<span class="token comment"># 安装openssl</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> openssl
<span class="token comment"># 安装boost</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libboost-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><pre><code>1. 下载所有libmysqlcppconn8的包 https://dev.mysql.com/downloads/connector/cpp/
2. 下载 mysql-community-client-plugins https://ubuntu.pkgs.org/18.04/mysql-8.0-amd64/mysql-community-client-plugins_8.0.29-1ubuntu18.04_amd64.deb.html
3. 按顺序安装包 首先mysql-community-client, 最后dev
</code></pre><h3 id="使用说明" tabindex="-1"><a class="header-anchor" href="#使用说明" aria-hidden="true">#</a> 使用说明</h3><h4 id="使用头文件" tabindex="-1"><a class="header-anchor" href="#使用头文件" aria-hidden="true">#</a> 使用头文件</h4><div class="language-C++ line-numbers-mode" data-ext="C++"><pre class="language-C++"><code>#include &lt;mysql-cppconn-8/mysql/jdbc.h&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="cmake-g-编译选项" tabindex="-1"><a class="header-anchor" href="#cmake-g-编译选项" aria-hidden="true">#</a> CMAKE/g++ 编译选项</h4><div class="language-CMAKE line-numbers-mode" data-ext="CMAKE"><pre class="language-CMAKE"><code>TARGET_LINK_LIBRARIES(cpp_test mysqlcppconn)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>gcc -lmysqlcppconn(不是mysqlcppconn8)</p>`,47),l=[d];function c(r,t){return e(),n("div",null,l)}const p=a(s,[["render",c],["__file","serve.html.vue"]]);export{p as default};
