# Ansys Workbench 基础与静力学分析
> 参考教程 <https://www.bilibili.com/video/BV1u4411B7Fo/>

## 基本使用
在进行有限元分析前必须确定以下事项

### 分析实例
**分析实例** 有限元分析所针对的模型 (一般为忽略工艺结构的简化模型), 模型的材料性质, 以及分析的类型 (弹性力学, 热力学, ...)

在此步骤中, 主要通过 Workbench 完成[实例导入](#实例导入)

### 问题描述
**问题描述** 模型的载荷, 约束与接触 (多体) 等边界条件, 以及分析的精度要求

在此步骤中, 根据不同分析类型, 使用的软件不同, 以静态结构为例
* 首先需要[网格划分](#网格划分)
* 然后在模型上[添加载荷与约束](#问题描述方法)

### 分析目标
**分析目标** 模型应当符合那些要求, 应当求解的量有那些 (应力, 应变, 位移)

在此步骤中, 根据不同分析类型, 使用的软件不同, 以静态结构为例
* 首先对问题进行[求解](#问题求解)
* 然后具体[分析目标](#分析目标方法)以及调整结果显示效果

### 有限元分析基本迭代步骤
有限元分析并不是模型建立一步到位即可, 通常需要按照以下步骤不断迭代比较, 才能确定最佳的模型与正确的结果

1. 模型确认
    * 导入要分析的装配体模型
    * 确定模型的[材料](#装配体零件管理)与[接触](#接触创建)设置与实际相符合
    * 确定模型的[约束与载荷](#问题描述方法)设置与实际相符合
1. 网格精度确认
    * 根据模型最薄位置厚度的 1/2 初步设置网格大小, 以及[其他基本设置](#网格基本设置)
    * 查看应力结果, 检查是否存在直角等不合理的[应力奇异点](#应力奇异问题), 并修改模型
    * 根据[网格无关性判断](#网格无关性判断), 对需要位置加密[局部网格](#局部网格), 直到结果满足要求
1. 计算结果确认
    * 初步判断: 变形与应力的最大值是否在合理范围内, 变形趋势与理论判断是否相符合
    * 理论判断: 通过[反力](#查看反力)等易于理论计算的项目, 将模型结果与理论计算对比, 误差应当小于 10%
    * 实验判断: 通过[实验与有限元分析对比](#实验与有限元分析对比), 确定模型的正确性
    * 如果结果存在问题, 应当回到第一步, 重新检查迭代模型

在以上迭代中, 建议使用[实例复制](#实例管理)功能, 复制多个模型便于相互比较

## Workbench 实例管理
Workbench 本质为一个有限元分析问题实例管理器, 具体的问题求解还是需要通过 Ansys 下的具体求解器完成

### Workbench 界面介绍
打开 Workbench 软件的界面, 进入软件的主**界面**, 其中包含 

#### 工具箱
**工具箱** (Toolbox) 位于界面左侧, 包含针对不同分析类型的模块
* ==一个模块代表了一个独立的分析实例==

#### 项目原理图
**项目原理图** (Project Schematic) 界面主要空白区域, 用于放置模块, 呈现分析实例的基本信息 (问题描述)
* ==一个项目中可以管理多个分析实例==, 即模块
* 模块中的项目右键菜单选择 `属性`, 可打开模块项目属性栏

#### 工程数据库
点击原理图中任意模块中工程数据 (Engineering Data) 项, 进入软件的**工程数据库**
* 通过界面上的选项卡可以切换回主界面或关闭工程数据库
* 在工程数据库中, 可以为当前问题选择材料, 设定物理属性

### 项目管理
主要介绍[项目原理图](#项目原理图)部分的使用

#### 实例导入
以静态结构问题为例, 通过以下方法导入分析实例
* 对于一般静力学分析问题, 使用**静态结构** (Static Structural) 模块
* 右键模块中 `几何结构` (Engineering Data) 项, 在右键菜单中选择 `导入几何模型->浏览` 导入用于分析的几何模型
    * 在浏览模型时, 建议将文件浏览器的文件类型设置为所有几何结构文件
    * 虽然 Ansys 也有[几何建模工具](#几何模型-designmodeler), 但一般不用于建模
    * 对于导入好的几何模型, 可使用[几何建模工具](#几何模型-designmodeler)进行微调, 具体见链接介绍
    * 如果希望更新实例的几何模型, 可以参考[几何建模工具](#几何模型-designmodeler)中的类似操作
* 点击模块中模型 (Model) 项, 进入软件的**分析界面**
    * 分析界面为一个独立的窗口
    * 问题描述中的信息即通过分析界面传递给软件

#### 实例管理
* 使用以下常用方式在项目原理图中修改模块基本信息
    * 双击模块下的文字, 可以修改模块名称, 管理多个实例时必须即使为模块命名
    * 点击模块的第一项, 即实例类型, 即可在项目原理图中拖动修改模块位置
* 使用以下常用方式在项目原理图中移动视图
    * 按住 <kbd>Ctrl</kbd> 加鼠标中键拖动可平移视图
    * 滚动鼠标滚轮可缩放视图
* 在设置完成单个模块后, 点击模块左上角按钮菜单, 选择 `复制` 可以快速复制实例, 用于备份与比较
* 通过模块之间的数据流还可以共享分析实例模型, 如几何模型, 工程数据等  
    * 按住鼠标左键, 拖动模块的共享项目, 移动到另一模块的相同项目上, 即可建立模型的共享关系
    * 对于复杂实例, 建议使用此方法共享模型, 而不是复制
* 对于一个项目下多个实例 (模型), 如果这些模型的网格划分, 边界条件等[问题描述](#问题描述)完成后, 在 Workbench 界面上方工具栏选择点击按钮 `更新项目`

#### 数据交互
* 一般情况使用 `文件->保存` 即可保存 Workbench 项目  
* 如果需要打包移动到其他电脑, 备份或==复制项目==, 则建议使用 `文件->存档` 将项目整体打包为 `wbpz` 文件 (一般包含外部文件, 不包含求解结果)
* 通过 `文件->打开` 选择 `wbpz` 文件将解包, 此时可以选择解包为的项目名称, 解包为新的项目

### 材料数据
主要介绍[工程数据库](#工程数据库)部分的使用  
以下操作默认在**工程数据库**界面中

#### 基本操作
**工程数据库**界面主要有以下几个部分
* `轮廓`, 位于界面中上侧, 包含了当前数据库内定义的各类材料
    * 点击最下方的项目的第 `A` 列 (有提示 `点击此处添加新材料`), 即可添加材料
    * 双击项目的第 `A` 列可以修改材料名称
* `工具箱`, 位于界面最左侧, 包含了可以向材料添加的各项属性
    * 使用工具箱前必须保证选中了 `轮廓` 中的任意项目, 而不是 `属性`
    * 双击 `工具箱` 中所需的属性, 即可将其添加到选中材料项目属性中
* `属性`, 位于界面中下侧, 包含了 `轮廓` 中选中材料的具体属性
    * 通过 `工具箱` 添加属性后, 在 `属性` 中定义材料属性的具体值
    * 定义时注意表头的 `值` 与 `单位`, 双击 `值` 所在列即可修改属性值

材料修改完成后, 应当在 [Mechanical 界面](#静态结构具体分析)中的[轮廓窗口](#轮廓窗口)打开项目 `材料` 的右键菜单选择 `刷新材料` 使修改生效  

关于零件材料的定义参见[装配体零件管理](#装配体零件管理)

#### 线性弹性材料定义
对于一个简单的线性弹性材, 至少需要定义以下属性
* `线性弹性->各向同性弹性` 必要参数, 包含弹性模量, 泊松比
    * 弹性模量对应力结果没有影响, 仅影响变形结果
    * 泊松比对应力与变形都有较小影响, 对于金属材料一般取 0.3
* `物理属性->密度` 用于惯性力条件, 如[重力条件](#常用问题描述项目)
* `物理属性->线膨胀系数` 用于热边界条件
* `强度->拉伸屈服强度` 用于[安全系数](#常用结果分析项目)

#### 工程数据源
对于多个常用的自定义材料数据, 可打包为一个工程数据源文件, 在多个文件中共享

点击选项卡下方栏的 `工程数据源` 按钮可进入编辑工程数据源模式
* 此时在 `轮廓` 上方添加 `工程数据源` 界面  
* 该模式中编辑的是工程数据源里的材料, 重新点击按钮即可回到模型的工程数据库

通过以下方法编辑工程数据源
* 在 `工程数据源` 界面, 点击最下方的项目的第 `A` 列 (有提示 `点击此处添加新库`), 即可添加新的数据源, 添加后还要选择数据源文件的保存地址
* 选择 `工程数据源` 界面中所需库名称后, `轮廓` 界面将显示源内的所有材料, 之后的编辑方式同[基本操作](#基本操作)
* 编辑完成后, 取消勾线 `工程数据源` 界面的 `B` 列复选框, 提示保存数据源
* 再重新选择项目, 右键 `轮廓` 界面的材料项目, 选择 `添加至工程数据`, 即可将库中的材料添加到工程数据库中

## 静态结构具体分析
以下主要介绍静态结构分析中所涉及到的 Mechanical 界面

### 分析界面
#### 轮廓窗口
**轮廓窗口** (Outline) 位于界面左上
* 其中的树状菜单即有限元分析时, 所需要各项的子项目 (项目通常即问题描述, 各个根项目集合了同类的描述)
* 通过根项目的右键菜单也可以添加该类的子项目
* 具有闪电标记的项目表示存在等待确定的内容

#### 详细信息窗口
**详细信息窗口** (Detail) 位于界面左下
* 其中显示在轮廓窗口选中项目的信息
* 通过点击其中的参数还可以选择并修改或添加
    * 其中黄色的参数为没有值等待确定的参数
    * 一般可通过输入或与模型交互等方式确定参数
    * 在参数确定后, 还要==点击参数上的 `应用` 按钮使参数修改生效==
* 输入参数时, 注意单位, Ansys 中使用统一的单位度量, 可通过[度量标准](#度量标准设置)修改
* 以[静态结构项目](#问题描述)下的 `力` 子项目的三个主要参数为例
    * 几何结构 (Geometry) 参数为力所在面或边, 通过点击模型上的面确定
        * 通过[工具栏](#工具栏)的 `选择过滤器`, 可确定选择对象为体, 面, 线等
        * 一般情况下, 按住 <kbd>Ctrl</kbd> 可以选择多个几何体
    * 大小 (Magnitude) 参数为力的大小, 通过输入数值确定
        * 允许使用科学计数法, 使用 `e` 划分指数
    * 方向 (Direction) 参数为力的方向
        * 通过选择模型上的边或==面 (法线方向)== 确定
        * 通过模型界面左下侧的双箭头或在数值大小添加负号 (一般以指向体外为正) 可修改方向
* 对于相同类型的项目, 可以在[轮廓窗口](#轮廓窗口)中使用 <kbd>Ctrl</kbd> 多选, 在详细信息窗口中统一设置参数

#### 环境选项卡
**XX环境选项卡** 位于界面上方
* 通常为第二个选项卡, 且随轮廓窗口中的选择的项目而改变
    * 选择网格根项目时, 变为**网格环境选项卡**
    * 选择任意求解项目下的子项目 (即与[分析目标方法](#分析目标方法)有关的子项目), 变为**结果环境选项卡**
* 除了右键菜单, 环境选项卡也是一个修改与特定根项目相关问题的==重要途经==

#### 模型界面
**模型界面** 即界面的主要部分
* 按住鼠标中键拖动可旋转模型
* 滚动鼠标滚轮可缩放模型
* 按住 <kbd>Ctrl</kbd> 与鼠标中键拖动可平移模型
* 按住鼠标右键, 框选区域可实现区域放大

#### 工具栏
**工具栏** 即界面上方, 选项卡下方的一系列小按钮且有对应的快捷键
* 工具栏的第三栏有一系列放大镜图标, 为 `缩放工具`, 常用的有 (此处直接介绍快捷键)
    * <kbd>F7</kbd> 缩放至匹配, 当模型不在视野中时可使用此功能
    * <kbd>Z</kbd> 缩放至匹配, 当模型不在视野中时可使用此功能
* 工具栏的第四栏有一系列立方体图标, 为 `选择过滤工具`, 使用此处工具可在[输入参数](#详细信息窗口)选择几何体时, 选择体, 面, 线等特定几何体

### 网格划分
以下操作中, 认为[轮廓窗口](#轮廓窗口)中的 `网格` 项目被选中  
通过 `网格` 项目的右键菜单, 选择 `生成网格` 即可完成网格的划分

#### 单元基础知识
* 单元类型
    * 根据模型特点, 单元主要有三种类型, 实体单元, 壳单元, 梁单元
    * 注意, 与[平面问题](#平面问题)不同, 三种单元均在三维空间中
    * 壳单元可表示为具有相同厚度的部件, 梁单元可表示为具有相同截面的部件
    * 默认介绍的是实体单元, 关于壳单元与梁单元介绍参见[笔记](#壳单元与梁单元)
* 单元阶数
    * 单元阶数指的是描述单元变形型函数的次数, 通常阶数越高精度越高
    * 一般仅有一阶与二阶单元, 二阶单元除了顶点, 在边中点上还有边节点
* 退化单元
    * 一般仅有六面体 (三维), 四边形 (壳) 单元
    * 令六面体的节点重合可以退化得到四面体, 五面体单元 (五面体精度最低不允许出现), 四边形壳单元类似
* Ansys 的默认单元
    * 对于体问题, 默认使用**二阶六面实体单元** SOLID186
    * 对于壳问题, 默认使用**一阶四边形壳单元** SHELL181
    * 对于梁问题, 默认使用**一阶梁单元** BEAM188
    * 通过选择项目 `静态结构->求解->求解方案信息`, [模型界面](#模型界面)将显示文本内容, 使用 <kbd>Ctrl</kbd>+<kbd>F</kbd> 查找字段 `ELEMENT TYPE` 可以确定模型所用的单元类型
* 关于单元自由度, 参见[同名章节](#单元自由度)
* 关于 Ansys 中各种单元的特性, 可通过查看帮助文件程序 `ANSYS Help XXXX RX` 确定 (帮助文件程序需要额外下载安装)

#### 单元自由度
定义自由度为描述一个物理场中一点所需的参数数, 对于以下单一物理场
* 结构场具有平动与转动共六个自由度
* 热力场具有一个温度自由度
* 电场具有一个电势自由度
* 磁场具有一个磁位自由度
* 流场具有一个压力自由度
* 上述单一物理场相互组合, 可得到更多自由度的耦合场

有限元分析中, 单元所能分析的物理场决定了单元的自由度, 通过[查看模型单元](#单元基础知识)在帮助文件
* 表 `Field Keys` 给出了单元所有能分析的单一物理场
* 表 `Coupled-Field Analyses` 给出了单元所能分析的所有耦合场, 以及此时的自由度与所需[材料属性](#材料数据)

注意
* 对于梁单元与壳单元, ==一般具有完整的六个自由度==
* 对于实体单元, ==一般仅有三个平动自由度==
* 因此两种单元的约束方法不同, 具体见[单元约束设置](#单元约束设置)

#### 网格基本设置
选中 `网格` 项目后, 在[详细信息窗口](#详细信息窗口)处, 将显示有关网格的基本设置, 以下为常用设置
*  `单元尺度` 参数为网格的大小设置
    * 通常网格越小分析精度越高
    * 在有限元分析中, 应[复制多个实例](#实例管理), 仅改变网格大小, 观察求解结果是否随网格大小剧烈变化, 以确定当前网格大小的结果基本准确 (网格无关性判定)
* `统计->节点`, `统计->单元` 参数为网格节点与单元数的统计
    * 此参数为只读的, 用于粗略判断与比较网格划分的密度
* `默认值->单元的阶` 参数为单元的阶数
    * `线性的` 使用一阶单元
    * `二次项` 使用二阶单元

当网格基本设置被修改后, 需要重新生成网格使设置生效

#### 网格无关性判断
有限元分析中, ==应力结果==可能随网格大小而变化, 为此要进行网格无关性判断, 保证当前网格大小的分析结果为合理的  
以下为常用的网格无关性判断方法 (以应力为分析对象)
* 合理性判断  
    * 检查分析的应力最大处与理论应力最大处 (应力集中点) 是否相同
    * 如果结果不符合理论, 则要考虑[应力奇异问题](#应力奇异问题)
* 减小网格大小  
    * 检查分析结果 (最大值) 是否与网格大小无关 (仅在小范围波动)
    * 如果结果没有收敛到一个波动范围, 则要考虑[应力奇异问题](#应力奇异问题) 
    * 如果网格不同, 结果发生巨大变化, 需要考虑固定, 接触等设置是否存在问题
* 简单定性判断
    * 通常薄壁件的最薄处至少要有两层网格, 可以此为依据快速寻找合理的全局网格大小  
    * 经验上认为, 如果红色区域 (应力最大的 10% 区域) ==连续==覆盖了至少 ==2 行且 2 列以上==的网格, 认为网格大小足够
        * 一般仅加密红色区域的[局部网格](#局部网格), 不调整全局网格
        * 在使用此规则时注意, 除了全局的红色区域, 还要关注局部的最大值, 特别是要分析的危险区域, 例如齿轮的齿根位置
        * 可通过[分析局部](#分析局部), 查看局部最大值所在面的应力分布中, 红色区域是否满足规则
        * 如果不满足, 同样需要加密[局部网格](#局部网格)
    * 除了红色区域, 当网格精度足够且模型理想时, 应力等值线应当为平滑的曲线
    * 如果不断减小网格, 而红色区域没有覆盖更多网格, 则要考虑[应力奇异问题](#应力奇异问题)

#### 应力奇异问题
在材料的尖角, 孔洞, 沟槽, 刚性集中处, 将出现显著的应力增大现象, 称为**应力集中现象**  
有限元分析以弹性力学为基础, 而在弹性力学理论中认为以下位置的应力为无穷大, 称为**应力奇异性**  
* 理想的尖角处
* 刚性约束处
* 非面均布的集中载荷 (线, 点处的集中载荷)

应力集中与应力奇异性在有限元分析中体现为
* 圆弧过渡的区域需要有足够的网格精度才能收敛到合理结果
* 尖角区域的分析结果将随网格细化而不断增大, 且无法收敛

在应力分析中, 使用以下方法应对应力奇异点与应力集中点
* 对于非危险区域的应力奇异点, 如刚性约束处, 可以使用[局部分析方法](#分析局部)忽略
* 对于危险区域的应力奇异点, 如==危险点==的应力集中处, 则不应该存在, 需要改善模型, 如添加圆角
* 对于应力集中点, 则可使用[局部网格](#局部网格), 减小局部的网格尺寸, 并通过[网格无关性判断](#网格无关性判断)确定最佳网格大小

与应力不同, ==位移分析则不存在上述问题, 且通常与网格大小无关==, 即任意大小网格分析的位移结果相近  
同样的, ==模型的位移结果也应当与实验结果相近==, 可通过该方法定性地判断模型的正确性  
因此一般通过位移对比同个实例, 不同算法的有限元分析结果, 当位移与理论出现偏差时, 通常表明[问题描述](#问题描述)一定存在问题

#### 局部网格
局部网格即在[全局网格](#网格基本设置)之外, 针对特定局部区域使用不同的网格设置, 通常用于全局使用大网格但, 为[应力集中点](#应力奇异问题)使用更小的网格, 以保证分析精度的同时减小分析时间

在 `网格` 项目的右键菜单的插入子菜单中, 可使用 `尺寸调整` 项目创建局部网格, 主要有参数
* `范围->几何结构` 参数为局部网格设置位置
    * 一般直接选择面生成的局部网格
    * 通过[选择过滤器](#工具栏)选择面的边, 可以使局部网格更均匀
* `定义->单元尺寸` 参数为局部网格的大小

使用局部网格时, 最好使用通过以下方式设置 `网格` 项目使过渡更加均匀
* 改用[四面体网格](#网格单元类型)
* 设置参数 `尺寸调整->使用自适应尺寸调整` 的值为 `否` (默认为 `是`)
* 设置参数 `尺寸调整->增长率` 的值为 `1.1` (可根据局部单元与默认单元尺寸差调整)

同样在[问题分析](#分析局部)中, 也可以对局部进行分析

#### 网格单元类型
对于三维弹性体的有限元分析, 主要有六面体与四面体单元两种
* 六面体单元的理论分析精度高
* 同等网格大小下六面体单元的单元数与网格数更多
* 六面体单元网格划分难度较大, 特别是存在[局部网格](#局部网格)与不规则物体的情况

虽然 Ansys 默认根据模型复杂度选择六面体或四面体单元, 但更推荐使用四面体单元, 以下为设置使用四面体单元的方法
* 在 `网格` 项目的右键菜单的插入子菜单中, 插入 `方法` 项目
* 在 `方法` 项目中设置参数 
    * 设置 `定义->算法` 为 `四面体` (本质为使用[退化单元](#单元基础知识))
    * 设置 `几何结构` 为整个模型

### 问题描述方法
以下操作中, 认为[轮廓窗口](#轮廓窗口)中的 `静态结构` 项目被选中  

#### 常用问题描述项目
在 `静态结构` 项目的右键菜单的 `插入` 子菜单可添加有关问题描述项目 (参数设置方法见[详细信息窗口](#详细信息窗口))
* 菜单选项 `力` (Force) 添加分布力载荷, 主要有参数
    * `几何结构` (Geometry) 参数为力所在面或边  
        * 选择面 / 线时为均布在各个单元上的力, 只是合力大小等于参数 `大小` 的值
        * 选择点时, 则将加载为集中力, 且各个点的力将均分 `大小` 参数给出的力
    * `大小` (Magnitude) 参数为力的大小
    * `方向` (Direction) 参数为力的方向
        * 通过选择面可选择面的法线方向, 即垂直于面的方向
    * 注意, 对于绝大多数情况下均布载荷是不合理的, 具体见[模型简化](#模型简化)
* 菜单选项 `标准地球重力` 添加重力加速度效果, 主要有参数
    * `方向` 注意一般重力加速度方向应是模型的竖直向下, 不一定是 `-Z`
    * 由于重力可能使运算速度减慢, 可以考虑忽略, 具体见[简化模型](#简化模型)
* 菜单选项 `固定支撑` (Fixed Support) 添加固定约束
    * 设置约束时==应当保证约束与模型相符==, 例如转动副, 平动副的约束参见[约束设置](#单元约束设置)

#### 刚体位移
当刚体在受力方向上没有任何约束时, 即使刚体处于受力平衡状态, 由于精度等问题, 实际可能存在一个极小的合力 (通常小于 $10^{-10}N$), 而这个合力将导致刚体位移, 这是在静态结构分析中不允许出现的

在实际分析中, 不允许上述问题的出现, 即有载荷就最好要有对应的约束 (至少添加一个固定约束以限制所有自由度)  
如果一定要分析此类问题, 可以通过以下方法添加 `弱弹簧` 解决
* 选择[轮廓窗口](#轮廓窗口)的 `静态结构->分析设置` 项目
* 设置[详细信息窗口](#详细信息窗口)的参数 `求解器控制->弱弹簧` 为 `开启`
* 如果要查看弱弹簧抵消的微小合力可在 `求解` 项目的右键菜单插入 `探针->力反应`
* 对插入项目参数 `定义->边界条件` 设置为 `弱弹簧`
* 检索结果后, 即可在此项目的[详细信息窗口](#详细信息窗口)中查看弱弹簧抵消的微小合力

注意, 对于非平衡问题, 不可以使用静态结构分析, 即使添加了弱弹簧也无法求解

对于装配体中, 由于无摩擦接触导致的刚体位移, 建议参考[接触设置](#接触设置)进行解决, 而不是弱弹簧

#### 静水压强载荷
静水压强载荷可用于分析盛放液体容器的受力情况

在 `静态结构` 项目的右键菜单的 `插入` 子菜单项目 `静液力压力` 即静水压强载荷项目, 该项目主要有以下参数需要设置
* 液体密度参数 `定义->流体密度`, 在 MPa 制下单位为 $kg/mm^3$, 与标准单位有关系 $1 kg/m^3=1\times 10^{-9} kg/mm^3$
* 重力加速度大小参数 `静液力加速度->大小`, 在 MPa 制下单位为 $mm/s^2$, 与标准单位有关系 $1 m/s^2=1\times 10^{3} kg/mm^3$
* 重力加速度方向参数 `静液力加速度->方向`, 一般即容器底面的法线==负方向==
* 自由液面位置 `自由表面位置->位置`, 即液体与大气接触的表面, 一般选择容器开口除的平面作为参数值

#### 添加局部均布载荷
在[常用问题描述项目](#常用问题描述项目), 如果希望对一整个面的部分区域添加载荷, 即选中这个局部区域  
但 Ansys 无法直接选中, 需要在模型中 `分割` 出这些局部区域, 例如
* Inventor 中, 使用 `修改->分割` 功能, 基于草图曲线将平面分割为两个部分
* Solidworks 中, 使用 `插入->曲线->分割线` 功能, 基于草图曲线将平面分割为两个部分
* [DesignMolder](#几何模型-designmodeler) 中, 参考[分割曲面](#分割曲面)的介绍

#### 圣维南原理
圣维南原理认为, 只要分析位置距离载荷==足够远==, 且载荷的==合力与合力矩不变==, 则载荷的分布==几乎不会影响==分析位置的==应力==, 注意
* 根据圣维南原理, 可通过比较[约束与接触反力](#反力分析)是否相近, 可以确定两个模型的边界条件是否相近 (相近时, 可能只是载荷分布不同), 该条件是模型等效的基础条件
* 圣维南原理只能保证应力结果相近, 但是不能保证位移结果, 因此需要分析位移时不能使用
* 圣维南原理的足够远过于模糊, 因此==需要实际对比验证, 不能直接使用==

#### 简化模型
==在工程实际中, 如果不确定是否有必要简化模型, 则不要简化模型==  
特别越是薄弱与需要分析的位置, 越不能简化

对于一般情况下, 理想的均布载荷是不存在的, 分析放置矩形重物的桌面变形
* 习惯上将重物与桌面的接触效果等效为一个均布载荷
* 实际分析时, 应当设置为重物与桌面间在重力作用下存在的[接触](#接触设置)
* 实际情况下, 往往由于变形实际桌面仅在重物的四个角点受力, 即两个模型边界条件相同但载荷分布不同, 因此最终分析结果也不同
* 以上例子也表明, ==不能轻易地将复杂载荷等效为均布载荷==

在[圣维南原理](#圣维南原理)中, 保证合力与合力矩相同时载荷可以任意简化, 但显然模型与实际的载荷分布越接近, 则简化模型在包括应力, 变形在内各项的分析误差也将减小, 因此可通过以下方式对模型进行简化 (以复杂装配体中的一个零件为例)
* 依据最接近真实的条件建立模型, 如实反应各个零件间的接触
* 通过[接触分析](#接触分析), 确定被分析零件的各个接触面上的实际力分布
* 通过点, 线, 面的[分布力载荷](#常用问题描述项目), 模拟实际力分布
* 比较[约束与接触反力](#反力分析), 确定等效载荷满足[圣维南原理](#圣维南原理)要求
* 比较[两模型位移](#常用结果分析项目), 误差小于 10% 则表明两模型可以认为是等效的

对于其他载荷, 如固定与接触, 是否考虑重力等项目, 通过简化可以极大减少运算事件, 也可使用类似的思路决定是否简化
* 建立一个准确模型与一个简化模型分别分析 (除简化条件外, 其他条件相同)
* 检查[两模型位移](#常用结果分析项目)==误差是否小于 5%==

#### 单元约束设置
对于==具有完整六自由度的梁单元与壳单元==, Ansys 中共有以下几种常用的约束设置
* **固定约束**, 通过项目 `固定支撑` (Fix Supported) 实现
    * 相当于固连 (插入) 约束, 将限制被约束部分的所有自由度
* **铰链约束**, 通过项目 `简单支撑` (Simple Supported) 实现
    * 即直接约束三个平动自由度
* **转动约束**, 通过项目 `固定主几何体` (Fixed Rotation) 实现 
    * 约束三个旋转自由度, 可以指定特定方向无约束
* **平动约束**, 通过项目 `位移` (Displacement) 实现
    * 约束三个平动自由度, 可以指定特定方向无约束或强制位移
    * 相当于向心轴承座, 平面滑动副, 滑动铰链等约束
    * 具体使用[参见](#位移约束项目)

对于==仅有三个平动自由度的实体单元==, Ansys 中共有以下几种常用的约束设置
* **固定约束**, 通过项目 `固定支撑` (Fix Supported) 实现
    * 相当于固连 (插入) 约束, 将限制被约束部分的所有自由度
* **转动约束** 与 **平动约束**
    * 推荐通过项目 `位移` (Displacement) 实现, 使用方法[参见](#位移约束项目)
    * 对于理想约束, 也可以通过项目 `远程位移` (Remote Displacement) 实现, 区别以及具体使用[参见](#远端位移约束)

三维问题转换为平面问题
* 在常见材料力学计算中, 机构被限制在二维的平面空间中, 本质上即 ROTX, ROTY, DZ 三个自由度被约束 (以 XY 平面为例, 其他类似)
* 因此需要对==整个模型==添加 Z 方向的**平动约束**与 X, Y 方向的**转动约束**

使用约束时注意
* 对于绝大多数情况下约束应施加在机架上, 直接施加在物体上的约束是不合理的, 实际应为分析物体与机架的[有摩擦接触](#接触设置)  
* 由于接触将导致运算时间增加, 因此在允许的范围内允许简化接触为约束, 具体合理性的判定方法参见[简化模型](#简化模型)

#### 位移约束项目
`位移` (Displacement) 项目除了实现对于模型特定位置的**平动约束**, 还可以实现强制位移以及**转动约束**  

与 `固定主几何体` 项目不同, 该项目可以用于实体问题与强制位移问题

* 用于**平动约束**时, 指定参数 `定义->X, Y, Z 分量`
    * 取值为 `自由`, 表示不约束
    * 取值为 `0`, 表示约束此方向的运动
    * 取值为特定数值, 表示强制位移
* 当被约束方向与全局坐标系不重合时
    * 需要创建坐标系, 使其坐标轴与约束方向重合
    * 在 `坐标系` 项目的右键菜单 `插入->坐标系`, 创建坐标系项目
    * 在新建的坐标系项目, 设置参数 `原点->几何结构`, 选择曲面即可自动创建
    * 在所需的 `位移` 项目中, 设置参数 `定义->坐标系` 为之前创建的坐标系 
* 用于**转动约束**时
    * 使用转动约束前必须设置坐标系, 方法与上同, 但需要设置新建坐标系项目的参数 `定义->类型` 为 `圆柱形`, 此时坐标系的 Y 轴将变为旋转坐标系
    * 之后的设置于一般的平动约束相同, 只是 Y 轴为转轴

#### 远端位移约束
对于==仅有三个平动自由度的实体单元==, [通常的转动约束](#单元约束设置)没有意义, 需要使用**远端位移约束** (Remote Displacement) 代替

远端位移约束的实质为使用一个具有六个自由度的自由点与==整个部件==刚性连接, 通过限制自由点的自由度实现对部件的约束

**远端位移约束**的项目名为 `远程位移`, 通过参数可设置六个方向自由度为无约束 (参数值 `自由`), 一般约束 (参数值 `0`) 或强制位移

使用**远端位移约束**时注意
* 参数 `范围->坐标系` (默认为全局坐标系) 与 `范围->...坐标` (默认将自动选择选择), ==该参数决定了三个旋转轴与平动方向==
* 参数 `几何结构` 本质为用于查找约束坐标系的中心, 并不是特指哪个部分被约束, 因此该约束更类似于==对整个刚体自由度的约束==
* 与[平动约束](#常用问题描述项目)不同, **远端位移约束**表示强制位移时, 体现为整个刚体的位移, 而不是特定点的位移
* 注意不能在一个坐标系中限制所有自由度
* 远端位移约束通常用于简化表示分析模型中的旋转副, 平动副等无法简化为固定约束的部分
    * 表示固定铰链时, 选择与铰链转轴重合的坐标系, 限制除转轴外的其他自由度
    * 表示移动铰链时, 选择与铰链转轴重合的坐标系, 限制除转轴与平动方向外的其他自由度

由于远端位移约束可能导致求解警告, 因此除了以下情况外, 建议使用[位移约束项目](#位移约束项目)
* 施加在整个物体上的约束
* 无法确定施加位置的约束
* 理想约束

### 分析目标方法
以下操作中, 认为[轮廓窗口](#轮廓窗口)中的 `静态结构->求解` 项目被选中  

在查看分析结果前, 注意[网格划分](#网格划分)与[问题描述](#问题描述)应当添加完成, 并且[求解完成](#问题求解)

#### 问题求解
在进行结果分析前, 应当保证求解已经完成  
可通过以下步骤进行问题的求解

* [轮廓窗口](#轮廓窗口)中打开 `求解` 项目的右键菜单, 选择 `求解`, 完成有限元分析
* 注意, 仅求解不会显示任何内容, 还需要在求解完成后, 在该项目添加子项目以明确显示的内容, 即分析目标
* 对于多个模型平行求解可参见[实例管理](#实例管理)

对于节点数 4800000 个的单摩擦接触模型, 通常需要 15GB 的临时硬盘空间, 求解总耗时 1.5 小时
* 在求解前, 需要保证硬盘空间足够, 否则无法求解
* 在求解时, 如果耗时远超预计值, 需要检查[求解方案信息](#求解方案信息解读)
* 对于其他模型, 可依据矩阵空间复杂度 `n^2`, 求逆计算复杂度 `n^2.5` 估计, 如果存在接触, 重力等需要适当增加时间

#### 常用结果分析项目
在 `求解` 右键菜单的 `插入` 子菜单可添加有关结果分析项目
* 总变形: `变形->总计` (Deformation->Total) 子项目
    * 特别在装配体中, 注意 `位移` 特指的是零件相对原始位置的位移, 是多个零件变形效果的叠加, ==不是单个零件的变形==
* 特定方向变形: `变形->定向` 子项目
    * 需要参数 `定义->方向` 指定位移投影方向
    * 通常理论计算结果 (==如绕度==) 与实验得到的位移具有方向性, 需要使用此项目反应
* 应力
    * 对于第四强度理论 (畸变能密度理论) 使用 `应力->等效 (von-mises)` 子项目 (适用于绝大部分情况)
    * 对于第三强度理论 (最大切应力理论) 使用 `应力->最大剪切` 子项目 (适用于材料受剪切为主的情况)
* 应变: 类似应力, 但一般不使用
* 定向正应力: `应力->法向` 子项目
    * 需要参数 `定义->方向` 指定正应力方向
    * 通常实验得到的应变 (应变片) 具有方向性, 需要使用此项目反应
* 安全系数
    * 首先添加项目 `应力工具->最大等效应力` (实际上该类型下的其他项目对应了其他强度理论, 此处即第四强度理论应力)
    * 对创建的 `应力工具` 项目右键菜单添加 `安全系数` (默认已经创建了一个)

结果分析中注意
* 在插入子项目后, 还需要在项目的右键菜单选择 `检索此结果` 完成分析
* 分析完成后, 通过选中子项目, 即可在模型中显示分析结果

#### 查看反力
除了一般物体上受到的应力, 物体之间接触或受约束产生的反力也是重要的分析项目  
在 `求解` 右键菜单的 `插入` 子菜单添加项目 `探针->力反应` 查看不同类型的反力  
参数项 `结果` 下的参数反映了反力的具体情况

* 约束反力
    * 设置参数 `定义->定位方法` 为 `边界条件`
    * 设置参数 `定义->边界条件` 为待查看的约束类型, 如 `固定支撑`
* 接触反力
    * 查看接触反力前需要设置项目 `静态结构->分析设置` 的参数 `输出控制->节点力` 为 `是`, 并==清除生成数据再重新求解==
    * 设置参数 `定义->定位方法` 为 `接触区域`
    * 设置参数 `定义->接触区域` 为待查看的[接触项目](#接触设置)名
    * 对于接触反力, 还可通过[接触分析](#接触分析), 查看接触面上接触力的具体分布

#### 分析局部
在很多时候可能只希望分析几何体上特定几个面的的应力与应变, 或除了整体分析外, 还希望能有局部分析  
此时可通过创建新的[分析项目](#常用结果分析项目), 但需要额外确定其中的 `范围->几何结构` 项目, 选择待分析的部分作为参数 (可通过[选择过滤器](#工具栏)以仅选择面)

* 如果希望仅分析特定面上的一个二维区域, 可参见[分割曲面](#分割曲面), 选择被分割的曲面
* 如果希望仅分几何体中的一个三维区域, 可参见[部件创建](#创建部件及其应用), 将零件作为部件划分为多个几何体, 选择希望分析的几何体

#### 颜色条设置
在模型中现实结果时, 都见以颜色的方式现实模型各点的值  
值在什么范围取多大则通过左侧的颜色条进行设置

颜色条上除了标注 `最大` (Max) 与 `最小` (Min) 处的数值, 均可通过直接输入的方式修改  
例如希望将红色区域用于表示超出材料强度的区分 (默认以最大应力处为红色区域)  
可以点击颜色条标注 `最大` (Max) 下方的数值 (不是颜色条最上方), 修改为许用强度, 此时超出许用强度的区域将显示为红色

如果希望增减颜色条的划分细度, 可以点击任意层的矩形颜色区域, 点击 `+` 或 `-` 按钮, 增加或缩短此段的颜色层次

#### 变形比例
在显示分析结果时, 默认会对模型的变形进行夸张, 不利于报告展示  
通过进入[结果环境选项卡](#环境选项卡), `显示` 部分的右上侧下拉栏可以调整变形比例, 选择 `1.0 (真实尺度)` 即可实际反应变形

#### 单元分析结果标注
通过以下方式, 可在结果分析中, 具体确定指定单元的分析结果, 并现实在图上  
通过进入[结果环境选项卡](#环境选项卡), `显示` 部分的右侧按钮可进行有关设置

对于特定单元
* `最大` 按钮启用后, 将在模型中标注分析结果取极大值的单元位置
* `最小` 按钮启用后, 将在模型中标注分析结果取极小值的单元位置

任意单元
* 点击 `探针` 按钮, 再在模型上点击指定单元, 即可在模型中标注出该单元的分析结果
* 添加标注后, 在界面下方的图像注解界面中可删除不需要的标注

#### 分析结果模型显示设置
通过进入[结果环境选项卡](#环境选项卡), `显示` 部分的中间按钮可进行有关设置
* `轮廓图` 按钮可以设置分析结果显示方式, 默认即颜色带, 可修改为渐变颜色, 等值线等
* `边` 按钮可以设置模型显示方式, 如隐藏网格, 显示未变形几何体等

#### 实验与有限元分析对比
通常在有限元分析后, 还需要使用实验验证有限元分析的准确性  
在对比时, 应当保证有限元分析的结果与实验测量对象相同
* 在实验测量时, 使用的通常为特定方向位移, 以及特定方向应力 (应变片), 这两项指标需要通过 `定向位移` 与 `法向应力` 反应, 具体见[常用结果分析项目](#常用结果分析项目)
* 在所有应变分析项目中, 都具有参数 `积分点位置->显示选项`, 该项目的含义为, 一个节点被多个单元共用, 而该节点在各个单元中求解出的应力值可能不同, 此时如何为此节点的应力取值
    * 参数值 `平均` 表明以不同值的平均作为节点应力, 该参数能使分析结果更加均匀连续 (默认选项)
    * 参数值 `未平均` 表明以各单元靠近节点的部分分别取值, 该参数得到的结果更加准确, 但可能偏于保守且结果不连续
    * 通常没有[应力奇异点](#应力奇异问题)时, 二者结果近似, 且一般认为 `未平均` 的结果为准确值
* 在实验与模型对比中, 还要注意, 载荷是在传感器安装前还是安装后加载的  
例如[重力载荷](#常用问题描述项目)在传感器安装前就已经存在, 因此传感器无法测出重力的变形效果, 实验结果与未加重力的情况更接近

#### 剖切视图
通过剖切视图, 可通过剖视的方法观察零件内部的分析结果

通过进入[结果环境选项卡](#环境选项卡), 点击 `插入` 部分右下角的 `截面` 按钮后, 在 `模型界面` 拖动绘制直线即可创建截面

对于创建的多个截面, 可在[详细信息窗口](#详细信息窗口)位置下方的 `截面` 选项卡管理

### 装配体分析
对于装配体的分析中, 往往需要考虑个零件间的接触才能得到正确的结果, 不能将接触简化为简单的约束

在装配体分析中, 必须要有接触对才可以进行求解, 否则将出错

#### 装配体零件管理
Ansys 允许在[实例导入](#实例导入)中直接导入装配体  
通过 `几何结构` 下的子项目可以管理装配体中的各个零件
* 导入装配体后需要设置参数 `材料->任务` 为零件使用的材料
* 右键菜单选择 `抑制几何体` 可以不分析几何体

#### 爆炸视图
对于装配体分析中, 默认整体处于装配状态, 如果要观察单个零件, 可通过爆炸视图完成  

选择 `显示` 选项卡 (不是 `环境显示`), 点击选项卡右侧区域的 `分解` 按钮, 拖动按钮菜单下的拖动条调整分离程度

在[结果分析](#分析目标方法)中, 无法使用爆炸图, 如果希望分析单个零件, 应使用[分析局部](#分析局部)与[选择过滤器](#工具栏)选择单个零件 (几何体)

#### 接触创建
一般情况下 Ansys 可以自动识别并创建装配体的接触  
打开[轮廓窗口](#轮廓窗口)的 `连接` 项目的右键菜单, 选择 `创建自动连接` 即可自动创建接触, 注意
* 注意检查是否有缺漏或多余的接触, 具体见[范围与目标](#接触设置)两个参数
* 自动创建的[接触设置](#接触设置)可能不符合实际接触要求, 需要额外检查并修改

通过以下方式手动创建接触 
* 右键 `连接` 项目菜单, 选择 `插入->连接组`, 创建连接组项目 (对于复杂装配体, 通过连接组可为连接分类)
* 右键 `连接->接触 x` 项目 (即创建的连接组) 菜单, 选择 `插入->手动接触区域`, 创建接触
* 点击 `接触 x` 下创建的接触项目菜单, 在[详细信息窗口](#详细信息窗口)设置接触面, 具体见[接触设置](#接触设置)

在创建接触时注意, 并不是装配体中部件相接触就一定要设置接触, 例如齿轮啮合中, 虽然有两个齿面接触, 但由于齿轮向一个方向转动, 因此总有一个接触面上的齿面要分离而不可能存在接触力

#### 接触设置
对于创建的接触项目 (一般位于接触组 `连接 -> 接触 x` 下), 主要的参数有 
* `定义->类型`, 该参数决定了接触的类型, 常用有
    * `绑定` 表明两个面相互固连没有相互移动, 如焊接面 (默认, 但一般是错误的)
    * `无摩擦` 表明两个面可相对滑动 (切向) 或分离 (法向), ==可能导致刚体位移问题, 不推荐使用==
        * 由于舍入误差, 无摩擦的接触面上可能出现极小的切向力导致刚体位移, 因此要避免使用
    * `无分离` 表明两个面可相对滑动 (切向) 但不允许分离 (法向), 如保证紧贴的滑动副
    * `摩擦` 表明两个面可相对滑动 (切向) 或分离 (法向), 通常用于表示最一般的接触面
        * 需要指定参数 `定义->摩擦系数`, 无法确定时, 经验上一般取 `0.2`
        * 为了避免刚体位移, 即使摩擦极小或与求解无关, 最好也使用此接触类型
* `范围->接触`, `范围->目标`, 该参数决定了相互接触的两个面
    * 建议在[爆炸视图](#爆炸视图)下设置此参数
    * 理论上允许选择多个物体的多个面, 但不建议
    * 通过右侧的接触与目标几何体视图, 可以具体查看接触面情况

#### 接触分析
在项目 `静态结构->求解` 的右键菜单选择 `插入->接触工具->接触工具` 可添加 `接触工具` 项目用于分析接触
* 点击创建的 `接触工具` 项目, 可在模型界面中设置此项目分析的接触
* 在 `接触工具` 项目右键菜单选择 `插入->压力` 可以分析接触反力在接触面上的具体分布

#### 间隙问题
在装配体的接触中, 可能存在以下两种接触问题
* 平面接触问题  
    * 由于装配建模等问题, 模型的两个零件之间可能并没有实际接触, 而是存在一个间隙
    * 对于此类问题, 通常 Ansys 将无法自动捕捉到此接触面
* 曲面接触问题  
    * 除与平面接触类似的情况外, 即使两个曲面在模型上相互接触, 在划分网格时由于曲线无法完全拟合, 依然会出现间隙

当间隙超过 Ansys 的阈值时 (一般为 0.001mm), 接触将被认为无效的, 且求解将会失败  
求解失败后, 查看项目 `求解方案信息`, 搜索 `gap`, 将出现一条关于求解器识别到初始间隙大小的信息

Ansys 中主要有以下方法解决间隙问题
* 对于平面接触
    * 修改对应接触项目的参数值 `几何修改->偏移` 为求解方案识别到的间隙, 允许略大于识别结果
    * 修改对应接触项目的参数值 `几何修改->界面处理` 为 `调整接触` (即自动识别间隙), 对于平面接触问题推荐使用此方法
* 对于曲面接触
    * 通过提升接触位置[局部的网格](#局部网格)密度 (即使离散化模型与实际更接近), 同样可以使间隙小于阈值, 对于曲面接触问题推荐使用此方法, 具体网格大小可见[曲面接触](#曲面接触)
    * 即使提升网格密度, 可能由于各种原因仍存在不可见的间隙, 因此还需要修改对应接触项目的参数值 `几何修改->偏移` 为一个略大于求解方案识别到的间隙的值, 一般为增大一个数量级并取整 (==不可使自动识别间隙的设置==)
    * 曲面接触如果求解正常, 则项目 `求解方案信息` 中, 不应该出现 `gap` 信息以及相关警告

#### 曲面接触
在曲面接触中, 除了[间隙问题](#间隙问题)还应当注意  
曲面接触通常体现为**赫兹接触**, 此时应体现为应力最大值出现在接触面向内一段距离, 称为**次表层应力**

因此为了得到准确的曲面接触分析结果
* 接触位置的单元尺寸应小于 `0.01mm` (为了避免运算量过大, 应在接触位置使用[局部网格](#局部网格)
* 最终分析结果需要体现出次表层应力现象, 即应力最大值在接触面上方, 且最大值区域完整覆盖两层单元 (通过查看表面的[局部应力](#分析局部))
* 检查[接触面压力](#接触分析), 压力分布呈椭圆形到矩形的过渡

### 其他设置与问题
#### 度量标准设置
Ansys 中使用统一的单位度量, 可通过如下方式进行修改  
点击界面下方栏的 `度量标准`, 选择所需的度量标准, 一般为 (mm, kg, N, s, ...), 此时应力单位为常用的 MPa

#### 求解崩溃
参考 <https://www.bilibili.com/read/cv33351074/>

在[问题求解](#问题求解)时出现消息框 `AnsysWBU.exe encountered a problem` 后, 软件崩溃时, 通过如下方法解决
* 打开 Mechanical 选项窗口 (右上角 √ 按钮)
* 找到选项 `分析设置和求解->材料数据管理->擦除求解器文件目录`
* 输入消息框中显示的文件所在目录的路径 (一般为 `C:\Users\XXX\AppData\Local\Temp`)

#### 更新模型
当模型在外部更新后, 需要在 Ansys Mechanical 中使用以下步骤同步更新
* 打开[轮廓窗口](#轮廓窗口)的项目 `几何结构导入->几何结构导入` 的右键菜单
* 选择菜单中的 `重新加载`, 等待重新加载完成 (可能需要较长时间)
* 关于重新生成网格等参考[重新打开模型](#重新打开模型)

#### 常见求解错误及解决
* 接触遗漏
    * 只有装配体中各个零件均建立接触关系后, 才能求解
    * 关于接触建立参见[接触创建](#接触创建)
* 模型受力不平衡 (各个零件的六个自由度应全部被约束)
    * 静态结构只能分析处于受力平衡状态 (或具有完全约束) 的结构
    * 关于仅通过外力实现平衡的情况, 可参见[刚体位移](#刚体位移)
    * 最好在结构的至少一处添加[固定约束](#常用问题描述项目) (限制所有六个自由度)
    * 最好使用摩擦 (限制所有六个自由度) 接触代替无摩擦 (仅限制三个自由度)
* 超出了内部解大小限制
    * 如果提示材料强度不足, 可参考[装配体零件管理](#装配体零件管理), 确定零件使用的材料是否正确 (即使只有单个零件)
    * 如果提示自由度没有约束, 可检查[接触](#间隙问题)与[约束问题](#单元约束设置)是否存在问题
* 未知问题
    * 对于提示未知的错误或求解耗时长, 可查看 `求解方案信息` 项目, 详见[求解方案信息解读](#求解方案信息解读)

在以上修复操作后, 建议复制存档旧的 `求解方案信息` 后, 打开项目 `模型` 的右键菜单, 选择 `清除生成的数据`, 重新求解

#### 求解方案信息解读
在[模型求解](#问题求解)过程中, `求解方案信息` 也将实时更新, 通过查看其中内容, 可以获取求解过程的详细信息, 特别是==出现未知错误与计算进度长时间停滞时, 应当检查求解方案信息==, 以下为常见检查
* 力计算
    * 在完成模型准备, 力计算步骤开始时, 将提示 `ALL CURRENT MAPDL DATA WRITTEN TO FILE NAME= file.rdb`
    * 首先迭代分析矩阵, 此时将按行显示如下所示的迭代信息   
    `Iteration= 30 Ratio= 0.219499 Limit= 1.000000E-08 Wall= 46.9`  
    * 力矩算出错时, 通常 `Ratio` 没有随迭代而减小时, 表明模型矩阵存在问题, 应停止计算并查看模型准备阶段的错误, 通常与[超出了内部解大小限制](#常见求解错误及解决)问题有关
* 接触问题  
    * 当力计算通过, 但出现与接触 (Contact) 有关的错误时, 需要停止计算, 通常问题与[间隙问题](#间隙问题)有关

#### 对称问题简化
如果模型的==几何结构以及边界条件==都有同一个对称面, 则分析结果也必然相对此面对称, 此时称为对称问题  
对称面本质为一种特殊约束, 保证物体不会有沿对称面法向的位移, 也可通过此条件判定对称面是否成立  

对于很多模型, 特别是简单零件分析模型都是对称问题, 例如 L 型支架, 带孔矩形板等简单零件的中心面通常就是对称面  
利用对称关系对问题进行简化, 可极大减少运算时间
* 二分之一对称与四分之一对称参见[建立对称关系](#建立对称关系)
    * 除了直接建立对称关系, 还可以通过对对称结构的对称截面上施加沿对称面法向的[位移约束](#常用问题描述项目)实现相同效果
    * 注意, 对称问题中, [力载荷](#常用问题描述项目)的值为均布力的合力, 因此==当载荷所在面被截为一半时, 力大小也要减半==
* 旋转对称问题 (常见于旋转机械, 压力容器等) 可以视为平面问题的一种, 参见[平面问题](#平面问题)

#### 平面问题
在以下几种特殊情况中, 可以使用平面单元代替三维单元进行分析, 也称为平面问题, 以此可极大降低计算复杂度
* 旋转对称问题, 也称为轴对称问题, 分析平面为最小的轴对称截面
* 平面应力与应变问题, 分析平面为任意沿厚度方向的法平面
    * 两种问题必须首先满足以下条件
        * 模型沿厚度方向法平面的任意截面均相同
        * 模型厚度方向没有载荷, 垂直厚度方向载荷在厚度方向上均布
    * 当厚度极薄时为平面应力问题, 如带孔矩形板
    * 当厚度极厚时为平面应变问题, 如大坝, 长轴等

通过以下方法创建平面问题模型, 具体分析步骤同一般模型
* 在[项目原理图](#项目原理图)中, 在模块的 `几何结构` 项目属性 (打开方式见前链接), 设置 `高级几何结构选项->分析类型` 为 `2D`
* 导入几何模型, 并通过 [DesignModeler](#几何模型-designmodeler) 打开
    * 对于轴对称问题, 首先需要通过[建立对称关系](#建立对称关系)中类似的方法切割得到模型的四分之一部分
    * 在菜单栏创建特征 `创建->薄/表面`, 主要设置以下参数
        * `几何结构` 设置为模型各个部件的垂直于厚度方向截面或轴对称截面
        * `厚度` 设置为 `0`
    * Ansys 要求平面问题中, 被分析平面必须位于==应位于全局坐标系 XY 平面==中
        * 可选中 `XY平面` 项目观察, 通过[平移与旋转模型](#插入特征)将模型移动到全局坐标系的 XY 平面中
        * 对于轴对称问题, 定义全局坐标 Y 轴为对称轴, 因此还要保证分析平面在 ==XY 平面的第一象限中==
* 打开 [Mechanical](#静态结构具体分析) 界面, 选择项目 `几何结构`, 在[详细信息窗口](#详细信息窗口)修改参数 `定义->2D行为`
    * 对于轴对称问题设置为 `轴对称`
    * 对于平面应力与平面应变问题分别设置为 `平面应力` 与 `平面应变`  
    * 对于平面应力还需要选择 `几何结构` 下的 `几何体子项目`, 设置参数 `定义->厚度` 为部件的实际厚度
* 在设置[力载荷](#常用问题描述项目)时注意, 项目参数为均布载荷合力, 且平面问题中选择的几何要素虽然为边
    * 对于平面应力与轴对称, 处理时将扩展为完整体的面, 并均布到面上
    * 对于平面应变问题, 处理时将体现为各个截面的边具有相同的, 被设置的均布力

对于轴对称问题, 可通过以下方法扩展为完整体
* 在 [Workbench](#workbench-界面介绍) 的菜单栏选择 `工具->选项`, 在选项截面中选择 `外观`, 勾选参数 `试用版选项`
* 在 [Mechanical](#静态结构具体分析) 界面选择 `模型` 项目进入[环境模型选项卡](#环境选项卡), 在 `准备` 区域点击 `对称` 按钮
* 选择新出现的 `对称` 项目, 修改参数 `类型` 为 `2D轴对称`, 修改 `重复数量` 与 `Δθ` 参数可调整显示方式

对于平面应力问题, 可通过以下方法扩展为完整体  
在 [Mechanical](#静态结构具体分析) 界面进入 `显示` 选项卡, 在其中的 `类型` 区域点击 `厚壳和梁` 按钮

#### 壳单元与梁单元
使用壳单元时, 应保证分析的==壳体模型各部分具有相同的厚度==, 并使用以下步骤提取中间面
* 在 [DesignModeler](#几何模型-designmodeler) 中打开模型
* 在菜单栏添加项目 `工具->中间表面`, 并设置参数 `"面"对`, 每次选择壳体上相对的两个面, 可以同时选择多对面
* 检查项目 `X 个部件, X 个几何体` 下的 `表面几何体` 子项目的参数 `厚度`, 通常该参数将通过原模型自动识别
* 剩余操作方法与实体类似, 可通过选择面, 通过面的法向量获得垂直于壳体方向

使用梁单元时, 应保证分析的==梁体模型各部分具有相同的截面==, 并使用以下步骤处理模型
* 在 [DesignModeler](#几何模型-designmodeler) 中打开模型
* 在菜单栏添加项目 `概念->边线`, 并设置参数 `边`, 选择模型梁方向的边, 可以同时选择多条边
* 在菜单栏添加项目 `概念->横截面->xxx`, 选择新建的面, 将自动进入[草图截面](#草图使用), 修改截面尺寸
* 设置项目 `X 个部件, X 个几何体` 下的 `线体` 子项目的参数 `横截面` 为之前创建的横截面 (注意参数含义, 如圆截面参数为半径 `R`)
* 抑制原始几何体, 在菜单栏选择 `查看->横截面固体`, 比较原始几何体与线体是否重合 (可能需要适当放大), 若不重合
    * 位置不重合
    * 形状不重合 检查截面尺寸是否正确
* 剩余操作方法与实体类似, 可通过选择面, 通过面的法向量获得垂直于壳体方向

对于壳单元与梁单元问题, 可通过以下方法扩展为完整体  
在 [Mechanical](#静态结构具体分析) 界面进入 `显示` 选项卡, 在其中的 `类型` 区域点击 `厚壳和梁` 按钮

实际上, 壳单元与梁单元本质上为实体单元的简化, 条件允许时, 一般实体单元的计算结果才是最准确的

## 其他工具简介
对于大部分 Ansys 工具, 均使用[轮廓与详细信息界面](#分析界面)的逻辑, 即在[轮廓窗口](#轮廓窗口)中选择项目, 在[详细信息窗口](#详细信息窗口)中修改项目参数

### 几何模型 DesignModeler
使用 DesignModeler 对于多种几何模型均能编辑, 具有较好的兼容能力因此可用于对导入的模型进行微调

一般在[模块](#实例导入)的 `几何实例` 右键菜单, 选择 `在 DesignModeler 中编辑几何结构` 即可在 DesignModeler 中打开几何模型

打开 DesignModeler 软件后, 一般几何模型不会显示, 需要
* 右键 `导入x` 菜单, 选择 `生成` 才能完全导入模型  
* 在上方菜单栏选择 `单位->毫米`, 将单位设置为常用的毫米制 (默认为米制)

#### 草图使用
创建草图
* 使用特征过滤器 (位置类似 [Mechanical](#工具栏)) 选择草图所在面
* 点击[轮廓窗口](#轮廓窗口)下方的 `草图绘制` 选显卡, 将自动创建草图
* 点击[轮廓窗口](#轮廓窗口)下方的 `建模` 选显卡, 即可回到建模界面

尺寸修改
* [轮廓窗口](#轮廓窗口)位置的按钮 `维度` 实际为尺寸约束
* 必须选择正确的尺寸类型后, 才能为对应位置添加尺寸
* 对于添加的尺寸, 需要在[详细信息窗口](#详细信息窗口)位置的项目 `维度->[尺寸名]` 修改尺寸

#### 插入特征
通过上方菜单栏 `创建` 即可插入特征
* 该方法将在[轮廓窗口](#轮廓窗口)创建一个相关项目
* [详细信息窗口](#详细信息窗口)中具体编辑特征
* 编辑完成后, 在项目的右键菜单选择 `生成` 使特征生效

对于常用特征的插入方法如下
* 圆角特征 对应 `创建->固定半径混合`
* 平移与旋转模型, 对应 `创建->几何体转换` 下的各个项目

#### 重新打开模型
在 DesignModeler 中完成编辑后重新打开模型时
* 在[轮廓窗口](#轮廓窗口)选择项目 `几何结构->[模型子项目]` 
* 在[详细信息窗口](#详细信息窗口)编辑参数 `材料->任务`, 确定实例所用的材料
* 在[模型界面](#模型界面)中选择缩放至匹配, 或使用快捷键 <kbd>F7</kbd>, 此时模型可能显示异常, 但是不影响使用 (重新启动即可修复, 但约束与载荷的提示也将消失)
* 重新[生成网格](#网格划分) (检查网格参数是否正确) 并设置[约束与载荷](#问题描述方法)的位置参数 (其余参数不变)
* 重新[求解问题](#问题求解), 完成更新, 如果求解崩溃可参考[求解崩溃](#求解崩溃)

注意, 大部分情况下重新打开模型时, 与模型无关的参数将被保留, ==但[接触设置](#接触设置)与[零件材料](#装配体零件管理)设置将丢失==, 需要重新设置, 最好也要检查其他设置是否被修改

#### 分割曲面
* 在上方菜单栏选择 `工具->解冻` 添加解冻项目, 并设置参数 `几何体` 为被分割面所在的几何体
* 通过[草图](#草图使用), 在待分割面上创建划分曲线 (注意曲线应闭合或与边界有重合约束)
* 在上方菜单栏选择 `创建->挤出`, 创建挤压项目, 并对项目的参数进行以下设置
    * 参数 `几何结构` 设置为划分曲线所在草图
    * 参数 `操作` 设置为 `印压面`
    * 参数 `扩展类型` 设置为 `至下一个`
* 在项目的右键菜单选择 `生成` 使特征生效
* 右键曲线草图项目, 选择 `隐藏草图`, 查看曲面分割效果
* 在上方菜单栏选择 `工具->冻结` 添加冻结项目

#### 分割几何体
* 通过[草图](#草图使用), 在任意分割方向的法面上创建划分曲线 (注意曲线应闭和, 可绘制为切割面所在线沿长并在足够远的位置闭合)
* 在上方菜单栏选择 `创建->挤出`, 创建挤压项目, 并对项目的参数进行以下设置
    * 参数 `几何结构` 设置为划分曲线所在草图
    * 参数 `操作` 设置为 `切割材料`
    * 参数 `扩展类型` 设置为 `从头到尾`
* 在项目的右键菜单选择 `生成` 使特征生效
* 此时项目 `X 个部件, X 个几何体` 下的部件数将增多, 打开此项目中不需要的 `固体` 项目 (选择项目时对应部分将高亮) 右键菜单, 选择 `抑制几何体`

#### 建立对称关系
* 使用[分割几何体](#分割几何体)沿对称面切割, 保留最小部分 (如果提供的模型已经为最小对称部分, 可忽略此步骤)
* 在工具栏选择 `创建->新平面`, 对创建项目设置以下参数
    * 参数 `类型` 设置为 `从面` (在软件中, 几何体的面为 Face, 几何平面为 Plane)
    * 参数 `基面` 设置为对称面, 通常即被切割面
* 在工具栏选择 `工具->对称`, 对创建项目设置以下参数
    * 参数 `对称平面` 设置为创建的对称面 (一般需要从[轮廓窗口](#轮廓窗口)中选择项目)
    * 参数 `模型类型` 设置为 `部分模型`
* 对于 1/4 对称操作相同, 只是需要选择两个对称面
* 在 [Mechanical](#静态结构具体分析) 中更新模型, 观察[轮廓窗口](#轮廓窗口)中是否出现 `对称` 项目, 且其下的 `对称区域` 子项目为对称面, 选择后高亮的区域为实际对称

#### 创建部件及其应用
在 Ansys 中, 部件是一种由多个零件 (几何体) 组成的整体, 但不同于装配体, 认为组成部件的各个零件一定是[绑定接触](#接触设置)

创建部件
* 展开 `X 部件, X 几何体` 项目下的 `固体` 子项目
* 使用 <kbd>Ctrl</kbd> 选中多个 `固体` 子项目
* 在其中一个项目的右键菜单选择 `形成新部件`

部件应用
* 最基本情况下, 可通过部件功能, 在 DesignModeler 中合并两个几何体
* 对于一般的[绑定接触](#接触设置), 建议使用部件代替
* [分析局部](#分析局部)时, 可使用部件中的一块零件表示需要局部分析的三维部分
